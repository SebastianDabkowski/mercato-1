@using Mercato.Notifications.Application.Services
@using System.Security.Claims
@inject INotificationService NotificationService
@{
    var userId = User.FindFirstValue(ClaimTypes.NameIdentifier);
    var unreadCount = 0;
    if (!string.IsNullOrEmpty(userId))
    {
        unreadCount = await NotificationService.GetUnreadCountAsync(userId);
    }
}
@if (unreadCount > 0)
{
    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6rem;">
        @(unreadCount > 99 ? "99+" : unreadCount.ToString())
        <span class="visually-hidden">unread notifications</span>
    </span>
}
